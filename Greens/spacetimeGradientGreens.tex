%
% Copyright © 2025 Peeter Joot.  All Rights Reserved.
% Licenced as described in the file LICENSE under the root directory of this GIT repository.
%
%%%{
%%\input{../latex/blogpost.tex}
%%\renewcommand{\basename}{spacetimeGradientGreens}
%%%\renewcommand{\dirname}{notes/phy1520/}
%%\renewcommand{\dirname}{notes/ece1228-electromagnetic-theory/}
%%%\newcommand{\dateintitle}{}
%%%\newcommand{\keywords}{}
%%
%%\input{../latex/peeter_prologue_print2.tex}
%%
%%\usepackage{peeters_layout_exercise}
%%\usepackage{peeters_braket}
%%\usepackage{peeters_figures}
%%\usepackage{siunitx}
%%\usepackage{verbatim}
%%%\usepackage{macros_cal} % \LL
%%\usepackage{amsthm} % proof
%%%\usepackage{mhchem} % \ce{}
%%%\usepackage{macros_bm} % \bcM
%%%\usepackage{macros_qed} % \qedmarker
%%%\usepackage{txfonts} % \ointclockwise
%%\usepackage{peeters_layout_exercise} % \makelemma
%%
%%\beginArtNoToc
%%
%%\generatetitle{Green's function for the spacetime gradient}
%%%\chapter{Green's function for the spacetime gradient}
%%%\label{chap:spacetimeGradientGreens}
%%
\subsection{Motivation}
I've been assembling a table of all the Green's functions that can be used in electrodynamics.  There's one set of those Green's functions left to fill in, the Green's functions for the spacetime gradient:
\begin{equation}\label{eqn:spacetimeGradientGreens:20}
\lr{\spacegrad + \inv{c}\PD{t}{}} G(\Bx, \Bx', t, t') = \delta(\Bx - \Bx')\delta(t - t').
\end{equation}
I'd like to compute the retarded and advanced Green's function for this operator for the 1D, 2D and 3D cases.

In \citep{pjootGAEE} I use the retarded time Green's function for the spacetime gradient to derive the Jefimenkos equations.  However, in retrospect my handling of that material is sloppy.  The starting point is the retarded wave equation Green's function, but I didn't even derive it, instead just lazily pointing to other authors that did.
I don't actually ever state the spacetime gradient Green's function, instead just using a sequence of intermediate results of that would be derivation.  Even worse, all of that is scattered roughshod across both chapter II and III, as well as the appendix.

\subsection{The idea.}
Suppose that we know the Green's functions for the wave equation
\begin{equation}\label{eqn:spacetimeGradientGreens:40}
\lr{\spacegrad^2 - \inv{c^2}\frac{\partial^2}{\partial t^2}} G_r(\Bx, \Bx', t, t') = \delta(\Bx - \Bx')\delta(t - t').
\end{equation}
\begin{equation}\label{eqn:spacetimeGradientGreens:60}
\lr{\spacegrad + \inv{c}\frac{\partial}{\partial t}} \lr{\spacegrad - \inv{c}\frac{\partial}{\partial t}} G_r(\Bx, \Bx', t, t') = \delta(\Bx - \Bx')\delta(t - t').
\end{equation}
This means that the Green's function for the spacetime gradient, a multivector valued entity, satisfying \cref{eqn:spacetimeGradientGreens:20}, is
\begin{equation}\label{eqn:spacetimeGradientGreens:80}
G(\Bx, \Bx', t, t') = \lr{\spacegrad - \inv{c}\frac{\partial}{\partial t}} G_r(\Bx, \Bx', t, t').
\end{equation}
So if we have a Green's function for the wave equation, it's just a matter of taking derivatives to figure out the Green's function for the spacetime gradient.

Why do we care?  Recall that the multivector form of Maxwell's equations is just
\begin{equation}\label{eqn:spacetimeGradientGreens:100}
\lr{\spacegrad + \inv{c}\frac{\partial}{\partial t}} F = J,
\end{equation}
so, if we know the Green's function for this non-homogeneous problem, we may simply invert this equation for \( F \) with a convolution.  This is how we can obtain the Jefimenkos equations in one fell swoop.

Now let's evaluate these derivatives.
\subsection{3D case.}
\subsubsection{Retarded case.}
I'm going to start with the 3D retarded case, since I know the answer for that, and at least nominally, have all the composite parts of that derivation at hand.  Then we can move on and compute the same for the advanced case, and then the 2D and 1D variants for fun.  It's not clear to me that we necessarily care about the 1D and 2D cases. I can imagine that there are circumstances where weird geometries or constraints force 1D and 2D solutions, but perhaps the 1D and 2D solutions will be academic and not practical.

Recall that the 3D retarded Green's function for the wave equation was found to be
\begin{equation}\label{eqn:spacetimeGradientGreens:120}
G_r = -\inv{4 \pi r} \delta\lr{ t - t' - r/c },
\end{equation}
where \( \Br = \Bx - \Bx', r = \Abs{\Br} \).
\makelemma{Gradient of \(\Abs{\Bx - \Bx'} \).}{lemma:spacetimeGradientGreens:1}{
The gradient of the scalar \( r = \Abs{\Bx - \Bx'} \) is
\begin{equation*}
\spacegrad \Abs{\Bx - \Bx'} = \frac{\Br}{r}.
\end{equation*}
This will be written as \( \spacegrad r = \rcap \), with \( \rcap = \Br/r \).
} % lemma
\begin{proof}
\begin{equation}\label{eqn:spacetimeGradientGreens:140}
\begin{aligned}
\spacegrad \Abs{\Bx - \Bx'}
&=
\sum_m \Be_m \partial_m \sqrt{ \sum_n (x_n - x_n')^2 } \\
&=
\sum_m \Be_m \inv{2} 2 \frac{x_m - x_m'}{r} \\
&=
\sum_m \Be_m \inv{2} 2 \frac{x_m - x_m'}{r} \\
&= \frac{\Br}{r}.
\end{aligned}
\end{equation}
\end{proof}
This means, suppressing the arguments of the delta function, that
\begin{equation}\label{eqn:spacetimeGradientGreens:160}
\begin{aligned}
\lr{ \spacegrad -(1/c) \partial_t } G_r
&= -\inv{4 \pi} \lr{
    (\spacegrad r) \frac{\partial_r \delta}{r} + (\spacegrad r) \lr{ -\frac{1}{r^2}}\delta
    - \inv{c r} \partial_t \delta
    } \\
&= -\inv{4 \pi} \lr{ \frac{\rcap}{r} \partial_r \delta -\frac{\rcap}{r^2} \delta - \inv{c r} \partial_t \delta} \\
&= -\inv{4 \pi r} \lr{ \rcap \partial_r \delta - \frac{\rcap}{r} \delta - \inv{c} \partial_t \delta} \\
\end{aligned}
\end{equation}

\makelemma{Derivatives of the delta function.}{lemma:spacetimeGradientGreens:180}{
The derivative of the delta function (with respect to a non-integration variable parameter \( u \)) is
\begin{equation*}
\frac{d}{du} \delta( a u + b - t' ) = a \delta( a u + b - t' ) \frac{d}{dt'},
\end{equation*}
where \( t' \) is the integration parameter for the delta function.
} % lemma
Observe that this is different than the usual identity
\begin{equation}\label{eqn:spacetimeGradientGreens:200}
\frac{d}{dt'} \delta(t') = -\delta(t') \frac{d}{dt'}.
\end{equation}
%which we find by computing the convolution of \( \delta' \) with a test function, and then integrating by parts.
\begin{proof}
As usual, we figure out the meaning of these delta function derivatives by their action on a test function in a convolution.
\begin{equation}\label{eqn:spacetimeGradientGreens:220}
\int_{-\infty}^\infty \frac{d}{du} \delta( a u + b - t' ) f(t') dt'.
\end{equation}

Let's start with a change of variables \( z = a u + b - t' \), for which we find
\begin{equation}\label{eqn:spacetimeGradientGreens:240}
\begin{aligned}
t' &= a u + b - z \\
dz &= - dt' \\
\frac{d}{du} &= \frac{dz}{du} \frac{d}{dz} = a \frac{d}{dz}.
\end{aligned}
\end{equation}

Substitution back into \cref{eqn:spacetimeGradientGreens:220} gives
\begin{equation}\label{eqn:spacetimeGradientGreens:260}
\begin{aligned}
\int_{-\infty}^\infty \frac{d}{du} \delta( a u + b - t' ) f(t') dt'
&=
a \int_{\infty}^{-\infty} \lr{ \frac{d}{dz} \delta( z ) } f( a u + b - z ) (-dz) \\
&=
a \int_{-\infty}^{\infty} \lr{ \frac{d}{dz} \delta( z ) } f( a u + b - z ) dz \\
&=
\evalrange{a \delta(z) f( a u + b - z)}{-\infty}{\infty} \\
&\qquad -
a \int_{-\infty}^{\infty} \delta( z )  \frac{d}{dz} f( a u + b - z ) dz \\
&=
- \evalbar{ a \frac{d}{dz} f( a u + b - z ) }{z = 0} \\
&=
- \evalbar{ a \frac{d}{d(au + b - t')} f( t' ) }{t' = a u + b} \\
&=
+ \evalbar{ a \frac{d}{d(t' -(au + b))} f( t' ) }{t' = a u + b} \\
&=
\evalbar{ a \frac{dt'}{d(t' - (a u + b))} \frac{d}{dt'} f( t' ) }{t' = a u + b} \\
&=
\evalbar{ a \frac{d}{dt'} f( t' ) }{t' = a u + b} \\
&=
\int_{-\infty}^\infty a \delta(a u + b - t') \frac{df(t')}{dt'} dt'.
\end{aligned}
\end{equation}
\end{proof}
In particular, this means that
\begin{equation}\label{eqn:spacetimeGradientGreens:280}
\begin{aligned}
\partial_r \delta(t - t' - r/c) &= -\frac{1}{c} \delta(t - t' - r/c) \PD{t'}{} \\
\partial_t \delta(t - t' - r/c) &= \delta(t - t' - r/c) \PD{t'}{} \\
\end{aligned}
\end{equation}

Application to \cref{eqn:spacetimeGradientGreens:160} gives
\begin{equation}\label{eqn:spacetimeGradientGreens:300}
\begin{aligned}
\lr{ \spacegrad -(1/c) \partial_t } G_r
&=
\inv{4 \pi r} \delta(t - t' - r/c)
\lr{
    \frac{\rcap}{r}
    +
    \lr{ \rcap + 1} \inv{c} \PD{t'}{}
} \\
\end{aligned}
\end{equation}
With \( t_r = t - r/c \), \cref{eqn:spacetimeGradientGreens:80} is found to be
\begin{equation}\label{eqn:spacetimeGradientGreens:320}
G(\Bx, \Bx', t, t') = \inv{4 \pi r} \delta(t_r - t')
\lr{
   \frac{\rcap}{r}
   +
   \lr{ \rcap + 1} \inv{c} \PD{t_r}{}
}
\end{equation}
\subsubsection{Advanced case.}
The advanced Green's function for the wave equation is
\begin{equation}\label{eqn:spacetimeGradientGreens:340}
G_a(\Bx, \Bx', t, t') = -\inv{4 \pi r} \delta\lr{ t' - t - r/c },
\end{equation}
so with \( t_a = t + r/c \), we must evaluate the delta function derivatives
\begin{equation}\label{eqn:spacetimeGradientGreens:360}
\begin{aligned}
\partial_r \delta\lr{ t' - t - r/c } &= -\inv{c} \delta\lr{ t' - t_a } \frac{d}{dt_a} \\
\partial_t \delta\lr{ t' - t - r/c } &= - \delta\lr{ t' - t_a } \frac{d}{dt_a}.
\end{aligned}
\end{equation}
So the Green's function for the space time gradient is
\begin{equation}\label{eqn:spacetimeGradientGreens:380}
\begin{aligned}
G(\Bx, \Bx', t, t')
&= -\inv{4 \pi r} \lr{ \rcap \partial_r \delta - \frac{\rcap}{r} \delta - \inv{c} \partial_t \delta} \\
&= \inv{4 \pi r} \delta\lr{t' - t_a} \lr{ \frac{\rcap}{r} + \lr{ \rcap - 1} \inv{c} \frac{d}{d t_a}}.
\end{aligned}
\end{equation}
\subsubsection{Application: Maxwell's equation.}
Let's use this to solve Maxwell's equation.  Finding a specific solution is now trivial.  The retarded solution is
\begin{equation}\label{eqn:spacetimeGradientGreens:400}
\begin{aligned}
F(\Bx, t)
&= \int dV' dt' \gpgrade{
G(\Bx, \Bx', t, t') J(\Bx', t')
}{1,2} \\
&= \inv{ 4 \pi } \int d^3 \Bx' dt'
\delta(t_r - t')
\gpgrade{
    \inv{r}
    \lr{
           \frac{\rcap}{r}
              +
                 \lr{ \rcap + 1} \inv{c} \PD{t_r}{}
    }
    J(\Bx', t')
}{1,2} \\
&=
\inv{ 4 \pi } \int d^3 \Bx'
\gpgrade{
    \inv{r}
    \lr{
           \frac{\rcap}{r} J(\Bx', t_r)
              +
                 \lr{ \rcap + 1} \inv{c} J'(\Bx', t_r)
    }
}{1,2},
\end{aligned}
\end{equation}
where \( J'(\Bx', t_r) = \PDi{t_r}{J(\Bx', t_r)} \).
Similarly, the advanced solution is
\begin{equation}\label{eqn:spacetimeGradientGreens:520}
F(\Bx, t) =
\inv{ 4 \pi } \int d^3 \Bx'
\gpgrade{
    \inv{r}
    \lr{
           \frac{\rcap}{r} J(\Bx', t_a)
              +
                 \lr{ \rcap - 1} \inv{c} J'(\Bx', t_a)
    }
}{1,2},
\end{equation}
where derivatives are with respect to \( t_a \).  In general, we are free to form a superposition of both the retarded and advanced solutions, as well as any solution of the homogeneous equation for charge and current free space \( \lr{ \spacegrad + (1/c) \partial_t } F = 0 \).

There's a lot of abstraction baked into these solutions.  One is the multivector charge and current density \( J \)
\begin{equation}\label{eqn:spacetimeGradientGreens:420}
J = \eta \lr{ c \rho - \BJ } + I \lr{ c \rho_\txtm - \BM },
\end{equation}
where \( \rho_\txtm, \BM \) are the fictitious magnetic sources that are used in engineering antenna and microwave circuit theory.  We can ignore those if we choose.  We also have the abstraction of the multivector field \( F = \BE + I \eta \BH = \BE + I c \BB \) itself on LHS.

Let's unpack this solution into it's constituent electric and magnetic field components, to see if the result looks more familiar.  First note that
\begin{equation}\label{eqn:spacetimeGradientGreens:440}
\begin{aligned}
\gpgrade{\rcap J}{1}
&=
\gpgrade{
\rcap \eta \lr{ c \rho - \BJ } + \rcap I \lr{ c \rho_\txtm - \BM }
}{1} \\
&=
\eta c \rho \rcap
- I \rcap \wedge \BM \\
&=
\frac{\rho}{\epsilon} \rcap
+ \rcap \cross \BM,
\end{aligned}
\end{equation}
and
\begin{equation}\label{eqn:spacetimeGradientGreens:460}
\begin{aligned}
\gpgrade{\rcap J}{2}
&=
\gpgrade{
\rcap \eta \lr{ c \rho - \BJ } + \rcap I \lr{ c \rho_\txtm - \BM }
}{2} \\
&=
I \lr{
    - \eta \rcap \cross \BJ
    +  \rcap c \rho_\txtm
} \\
&=
I \eta \lr{
    \BJ \cross \rcap
    +  \rcap \frac{\rho_\txtm}{\mu}
}
\end{aligned}
\end{equation}
Selecting the vector and bivector components of the field \( F = \BE + I \eta \BH \), we have
\begin{equation}\label{eqn:spacetimeGradientGreens:480}
\BE(\Bx, t)
=
\inv{4 \pi \epsilon}
\int d^3 \Bx'
\lr{
    \frac{\rho}{r^2} \rcap
    + \frac{\rho'}{c r} \rcap
    + \epsilon \frac{\rcap}{r^2} \cross \BM
    + \frac{\epsilon \rcap}{c r} \cross \BM'
    \mp \frac{1}{c^2 r} \BJ'
}
\end{equation}
and
\begin{equation}\label{eqn:spacetimeGradientGreens:500}
\BH(\Bx, t)
=
\inv{4 \pi \mu}
\int d^3 \Bx'
\lr{
      \frac{\rho_\txtm}{r^2} \rcap
    + \frac{\rho_\txtm}{c r} \rcap
    + \mu \BJ \cross \frac{\rcap}{r^2}
    + \mu \BJ' \cross \frac{\rcap}{c r}
    \mp \inv{c^2 r} \BM'
},
\end{equation}
where the negative sign is for the retarded solution, with times and derivatives with respect to the retarded time \( t_r = t - \Abs{\Bx - \Bx'}/c \), and the positive case for the advanced solutions where times are evaluated at the advanced time \( t_a = t + \Abs{\Bx - \Bx'}/c \).
For the retarded case, if we zero the fictitious sources, setting \( \rho_\txtm = 0, \BM = 0 \), these are Jefimenko's equations, as seen in \citep{griffiths1999introduction}.  Griffiths derives them by first solving for the potential functions that solve the 2nd order scalar wave equation problem, and then computing all the derivatives.
\subsection{1D case.}
The Green's function for the 1D spacetime gradient is easy to compute
\begin{equation}\label{eqn:spacetimeGradientGreens:540}
\begin{aligned}
G
&= -\frac{c}{2} \lr{ \spacegrad - \inv{c} \partial_t } \Theta(\pm (t - t') - r/c) \\
&=
-\frac{c}{2} \lr{
    -\inv{c} \rcap - \inv{c} (\pm 1)
}
\delta(\pm (t - t') - r/c)  \\
&=
\inv{2} \lr{ \rcap \pm 1 } \delta(\pm (t - t') - r/c).
\end{aligned}
\end{equation}
\subsection{2D case.}
The Green's function for the 2D spacetime gradient is
\begin{equation}\label{eqn:spacetimeGradientGreens:560}
G = -\inv{2 \pi}
\lr{ \spacegrad - \inv{c} \partial_t }
\frac{\Theta(\pm (t - t') - r/c) }{
  \sqrt{\lr{ \tau^2 - r^2/c^2 }}
}.
\end{equation}

The derivatives of the step are
\begin{equation}\label{eqn:spacetimeGradientGreens:580}
\begin{aligned}
\lr{ \spacegrad - \inv{c} \partial_t } \Theta(\pm (t - t') - r/c)
&=
\lr{
    -\inv{c} \rcap -\inv{c} (\pm 1)
}
\delta(\pm (t - t') - r/c) \\
&=
-\inv{c} \lr{ \rcap \pm 1 }
\delta(\pm \tau - r/c).
\end{aligned}
\end{equation}
and the derivatives of the denominator is
\begin{equation}\label{eqn:spacetimeGradientGreens:600}
\begin{aligned}
\lr{ \spacegrad - \inv{c} \partial_t }
\lr{(t - t')^2 - r^2/c^2}^{-1/2}
&=
-\inv{2}(2) \lr{ -\inv{c^2} r \rcap -\inv{c} (t - t') }
\lr{(t - t')^2 - r^2/c^2}^{-3/2} \\
&=
\inv{c^2} \lr{ \Br + c \tau }
\lr{\tau^2 - r^2/c^2}^{-3/2}.
\end{aligned}
\end{equation}
so
\begin{equation}\label{eqn:spacetimeGradientGreens:620}
G(r, \tau) =
\frac{
    \lr{\tau^2 - r^2/c^2}^{-3/2}
    }{2 \pi c^2}
\lr{
    c \lr{ \rcap \pm 1 }
    \lr{\tau^2 - r^2/c^2}
    \delta(\pm \tau - r/c)
    -\lr{ \Br + c \tau }
    \Theta(\pm \tau - r/c)
}.
\end{equation}
%}
%%\EndArticle
